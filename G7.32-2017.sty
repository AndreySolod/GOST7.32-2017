%Стиль предназначен для использования с классом 'article'
\RequirePackage[utf8]{inputenc}
\RequirePackage{mathtext}
\RequirePackage[russian]{babel}
\RequirePackage{float}
\RequirePackage{graphicx}
\RequirePackage[14pt]{extsizes}
\RequirePackage{vmargin}
\setmarginsrb{3cm}{2cm}{1.5cm}{2cm}{0pt}{0mm}{0pt}{0mm}
\setpapersize{A4}
\RequirePackage{indentfirst}
\RequirePackage{amsmath}
\RequirePackage{cmap}          % русский поиск в pdf
\RequirePackage{amsfonts}
\RequirePackage{amssymb}
\RequirePackage{tempora}
\sloppy

\RequirePackage[datesep={.}]{datetime2} %Дата и время
\DTMsetstyle{ddmmyyyy}

\RequirePackage{setspace}
\onehalfspacing %Полуторный интервал

\newcounter{IndAppendix} %Счётчик приложений. Думаю, что желательно его подключить здесь.
\RequirePackage[tableposition=top]{caption} % Красивая подпись к рисункам и графикам
\DeclareCaptionLabelFormat{gostfigure}{Рисунок #2}
\DeclareCaptionLabelFormat{gosttable}{Таблица #2}
\DeclareCaptionLabelSeparator{gost}{~---~}
\captionsetup{labelsep=gost}
\captionsetup[figure]{labelformat=gostfigure}
\captionsetup[table]{labelformat=gosttable}

\newcommand{\@maketablecaption}[2]{ % Подпись к таблице --- слева вверху. Спасибо интернет за это.
\vskip\abovecaptionskip
\sbox\@tempboxa{#1 --- #2}%
\ifdim \wd\@tempboxa >\hsize
#1 --- #2\par
\else
\global \@minipagefalse
\hb@xt@\hsize{\box\@tempboxa}%
\fi
\vskip\belowcaptionskip}
\renewcommand{\table}
{\let\@makecaption\@maketablecaption\@float{table}}


\parindent=1.25cm % Абзацный отступ
\setcounter{secnumdepth}{3} % В оглавление попадают все элементы до subsubsection

\renewcommand\large{\@setfontsize\large{15.5}{17}}

\RequirePackage{enumitem} % Переопределение обычного enumerate и itemize
\AddEnumerateCounter{\arabic}{\@arabic}{}
\setlist{nolistsep}
\renewcommand{\labelitemi}{--- }
\renewcommand{\labelenumi}{\arabic{enumi}.}
\renewcommand{\labelenumii}{\arabic{enumi}.\arabic{enumii}.}

% Счётчики общего числа страниц, таблиц, рисунков и источников
\newcounter{totaltable} \setcounter{totaltable} {0}
\newcounter{totalfigure}\setcounter{totalfigure}{0}
\newcounter{totalappendix}

% Команды отображение общего числа ...
\newcommand{\totalpages}{\pageref{reftotalpages}}
\newcommand{\totaltables}{\ref{reftotaltables}}
\newcommand{\totalfigures}{\ref{reftotalfigures}}
\newcommand{\totalappendix}{\ref{reftotalappendix}}

% Стандартные части
\newcommand{\Executors}{% Список исполнителей
\newpage
\begin{center}
\noindent\bfseries\large СПИСОК ИСПОЛНИТЕЛЕЙ\\
\end{center}}

\newcommand{\Repherat}{% Реферат
\newpage
\begin{center}
\noindent\bfseries\large РЕФЕРАТ\\
\end{center}

%Отчёт \totalpages{} c, \totalfigures{} рис., \totaltables{} табл., \totalappendix{} примеч.,
}

\newcommand{\TermAndDefine}{% Термины и определения
\newpage
\begin{center}
\bfseries\noindent\large ТЕРМИНЫ И ОПРЕДЕЛЕНИЯ\\
\end{center}
\addcontentsline{toc}{section}{Термины и определения}
}

\newcommand{\listAbbreviationAndNotation}{% Перечень сокращений и обозначений
\newpage
\begin{center}
\bfseries\noindent\large ПЕРЕЧЕНЬ СОКРАЩЕНИЙ И ОБОЗНАЧЕНИЙ
\end{center}
\addcontentsline{toc}{section}{Перечень сокращений и обозначений}
}

\newcommand{\Intoduction}{% Введение
\newpage
\begin{center}
\noindent\bfseries\large ВВЕДЕНИЕ
\end{center}
\addcontentsline{toc}{section}{Введение}
}

\renewcommand{\section}{\newpage\@startsection{section}{1}% Секция основного текста
{\parindent}{-20pt}{1.5ex}%
{\normalfont\large\bfseries\hyphenpenalty=9999
}}

\renewcommand{\subsection}{\@startsection{subsection}{2}{\parindent}% Подсекция основного текста
{0pt}{1.5ex}%
{\normalfont\normalsize\bfseries\hyphenpenalty=9999
}}

\renewcommand{\subsubsection}{\@startsection{subsubsection}{3}{\parindent}% Подсекция основного текста
	{0pt}{1.5ex}%
	{\normalfont\normalsize\bfseries\hyphenpenalty=9999
}}

\renewcommand\contentsname{СОДЕРЖАНИЕ}% Содержание

\RequirePackage{tocloft}
\renewcommand{\cfttoctitlefont}{\hspace{0.38\textwidth} \bfseries\MakeUppercase}
\renewcommand{\cftbeforetoctitleskip}{-1em}
\renewcommand{\cftsecfont}{\hspace{0pt}}
\renewcommand{\cftsecleader}{\cftdotfill{\cftdotsep}}
\renewcommand{\cftsubsecleader}{\cftdotfill{\cftdotsep}}
%\renewcommand{\cftsubsecfont}{\hspace{0em}}
\renewcommand{\cftparskip}{-1mm}
\renewcommand{\cftdotsep}{1}

\renewcommand{\l@section}{\@dottedtocline{1}{0em}{1em}}

\renewcommand{\l@subsection}{\@dottedtocline{2}{1em}{1.5em}}

%                  Перечисления:

\newenvironment{GostItemize}{%Через тире
\renewcommand{\item}{\par
--- }
}{}

\newcounter{my:enumi}
\newcounter{my:enumii}[my:enumi]
\newcounter{my:enumiii}[my:enumii]

\newenvironment{GostEnumerate}{%Через цифры
\setcounter{my:enumi}{0}
\setcounter{my:enumii}{0}
\setcounter{my:enumiii}{0}
\renewcommand{\item}{\par
\refstepcounter{my:enumi}
\arabic{my:enumi} }

\renewenvironment{GostEnumerate}{
\setcounter{my:enumii}{0}
\setcounter{my:enumiii}{0}
\renewcommand{\item}{\par
\refstepcounter{my:enumii}
\arabic{my:enumi}.\arabic{my:enumii} }

\renewenvironment{GostEnumerate}{
\setcounter{my:enumiii}{0}
\renewcommand{\item}{\par
\refstepcounter{my:enumiii}
\arabic{my:enumi}.\arabic{my:enumii}.\arabic{my:enumiii} }
}{}
}{}
}{}

\newcounter{symbol:enumi} % Символьная нумерация
\newenvironment{GostSymbolEnumerate}{
\setcounter{symbol:enumi}{0}
\renewcommand{\item}{\par
\refstepcounter{symbol:enumi}
\asbuk{symbol:enumi}) }}{}

\newcommand{\Conclusion}{%Заключение
\newpage
\begin{center}
\bfseries\noindent\large ЗАКЛЮЧЕНИЕ\\
\end{center}
\addcontentsline{toc}{section}{Заключение}
}

\newcommand{\ListSource}{%Список использованных источников
\newpage
\begin{center}
\bfseries\noindent\large СПИСОК ИСПОЛЬЗОВАННЫХ ИСТОЧНИКОВ
\end{center}
\addcontentsline{toc}{section}{Список использованных источников}
}

\newcommand{\Appendix}{%% Приложение
\newpage\refstepcounter{IndAppendix}
\begin{center}
\bfseries\noindent\large ПРИЛОЖЕНИЕ \Asbuk{IndAppendix}
\end{center}
\addcontentsline{toc}{section}{Приложение \Asbuk{IndAppendix}}
%\captionsetup[figure]{labelformat=gostfigure2}
%\captionsetup[table]{labelformat=gosttable2}
\addtocounter{totaltable}{\c@table}
\setcounter{table}{0}
\addtocounter{totalfigure}{\c@figure}
\setcounter{figure}{0}
%\setcounter{section}{\c@IndAppendix}
%\renewcommand{\thesection}{\Asbuk{section}}
\renewcommand{\thefigure}{\Asbuk{IndAppendix}.\arabic{figure}}
\renewcommand{\thetable}{\Asbuk{IndAppendix}.\arabic{table}}
}

\newcommand{\Finish}{
\label{reftotalpages}
{\addtocounter{totalfigure}{\c@table}
\addtocounter{totalfigure}{-1}
\refstepcounter{totalfigure}\label{reftotalfigures}}
{\addtocounter{totaltable}{\c@figure}
\addtocounter{totaltable}{-1}
\refstepcounter{totaltable}\label{reftotaltables}}
\addtocounter{totalappendix}{\c@IndAppendix}\label{reftotalappendix}
}